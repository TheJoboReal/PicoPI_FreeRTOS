#include <stdio.h>
#include "pico/stdlib.h"
#include "FreeRTOS.h"
#include "task.h"
#include "tusb.h"

#define LED_PIN 0 // Built-in LED on Raspberry Pi Pico

void vBlinkTask() {
    for (;;) {
        gpio_init(LED_PIN);
        gpio_set_dir(LED_PIN, GPIO_OUT);

        gpio_put(LED_PIN, 1);
        vTaskDelay(500);
        gpio_put(LED_PIN, 0);
        vTaskDelay(500);
    }
}

void usbHelloTask(){
    stdio_init_all;
    while (1){
        printf("Hello World\n");
        vTaskDelay(500);
    }
    
}

void main() {
    gpio_init(PICO_DEFAULT_LED_PIN);
    gpio_set_dir(PICO_DEFAULT_LED_PIN, GPIO_OUT);
    xTaskCreate(vBlinkTask, "Blink Task", 128, NULL, 1, NULL);
    xTaskCreate(usbHelloTask, "USB Hello Task", 128, NULL, 2, NULL);
    vTaskStartScheduler();
}
